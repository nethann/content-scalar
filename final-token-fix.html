<!DOCTYPE html>
<html>
<head>
    <title>Final Token Fix</title>
    <style>
        body { font-family: monospace; padding: 20px; background: #1a1a1a; color: #fff; }
        button { background: #ef4444; color: white; padding: 15px 30px; border: none; border-radius: 8px; font-size: 18px; margin: 10px; cursor: pointer; }
        button:hover { background: #dc2626; }
        pre { background: #2d2d2d; padding: 15px; border-radius: 8px; white-space: pre-wrap; }
        .success { color: #10b981; }
    </style>
</head>
<body>
    <h1>🔥 FINAL TOKEN RESET</h1>
    <p>This will COMPLETELY reset your tokens to unlimited developer tokens.</p>
    
    <button onclick="nuclearReset()">💣 NUCLEAR RESET - Give Me Unlimited Tokens!</button>
    
    <pre id="output"></pre>
    
    <script>
        function log(message) {
            document.getElementById('output').innerHTML += message + '\n';
        }
        
        function nuclearReset() {
            document.getElementById('output').innerHTML = '';
            log('💣 NUCLEAR RESET INITIATED...');
            log('');
            
            // Step 1: Clear ALL token-related data
            const keysToRemove = [];
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                if (key.includes('tokens_') || key.includes('userTier_')) {
                    keysToRemove.push(key);
                }
            }
            
            keysToRemove.forEach(key => {
                localStorage.removeItem(key);
                log(`🗑️ Removed: ${key}`);
            });
            
            log('');
            log('Step 1: ✅ Cleared all existing token data');
            
            // Step 2: Set developer tier for your main user ID
            const userId = 'user_31hVDxKcJVzP6CJZXDvB5wWK4y5';
            localStorage.setItem(`userTier_${userId}`, 'developer');
            log(`Step 2: ✅ Set ${userId} to developer tier`);
            
            // Step 3: Manually create unlimited token entry
            const unlimitedTokenData = {
                count: -1,  // This is the unlimited token value
                lastRefresh: new Date().toISOString(),
                tier: 'developer'
            };
            
            localStorage.setItem(`tokens_${userId}`, JSON.stringify(unlimitedTokenData));
            log('Step 3: ✅ Created unlimited token data (-1 = infinite)');
            
            // Step 4: Verify
            log('');
            log('🔍 VERIFICATION:');
            const tierCheck = localStorage.getItem(`userTier_${userId}`);
            const tokenCheck = JSON.parse(localStorage.getItem(`tokens_${userId}`));
            
            log(`✅ User Tier: ${tierCheck}`);
            log(`✅ Token Count: ${tokenCheck.count} (${tokenCheck.count === -1 ? 'UNLIMITED ∞' : 'LIMITED'})`);
            log(`✅ Token Tier: ${tokenCheck.tier}`);
            
            log('');
            log('🎉 RESET COMPLETE!');
            log('🚀 Refresh your main app now - you should see ∞ tokens!');
            
            setTimeout(() => {
                alert('✅ UNLIMITED TOKENS ACTIVATED! Refresh your main app now.');
            }, 1000);
        }
    </script>
</body>
</html>